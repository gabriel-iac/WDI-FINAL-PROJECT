<section class="container" ng-controller="MovieController as films">

  <section ng-show="films.movie">
    <div class="row col-md-12">
      <div class="card">
        <img class="card-img-top" ng-src="https://image.tmdb.org/t/p/w300{{films.movie.poster_path}}" alt="Card image cap">
        <div class="card-block">
          <h5 ng-if="movie.name" class="card-title">{{ films.movie.name}}</h5>
          <h6 class="card-text"><em>{{ films.movie.media_type}}</em></h6>
          <p class="card-text overview" >{{ films.movie.overview | limitTo: films.letterLimit}}</p>
          <p class="card-text">Popularity: {{ films.movie.popularity}}</p>
          <p class="card-text">Rating: {{ films.movie.vote_average}}</p>
          <p class="card-text">Release Date: {{ films.movie.release_date}}</p>
          <a ng-click="films.resetMovie()" class="btn btn-primary">Back</a>
        </div>
      </div>
    </div>
  </section>

  <section ng-hide="films.movie">
    <form>
      <input  ng-change="films.onFilter(search)" type="text" ng-model="search" name="text" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 200, 'blur': 0 } }" />
    </form>
    <hr/>
    <a href="" ng-click="films.predicate=''">unsorted</a>
    <table class="friend">
      <tr>
        <th>
          <a href="" ng-click="films.order('title')">Title</a>
          <span class="sortorder" ng-show="films.predicate === 'title'" ng-class="{reverse:reverse}"></span>
        </th>
        <th>
          <a href="" ng-click="films.order('-popularity')">Popularity</a>
          <span class="sortorder" ng-show="films.predicate === '-popularity'" ng-class="{reverse:reverse}"></span>
        </th>
        <th>
          <a href="" ng-click="films.order('-vote_average')">Ratings</a>
          <span class="sortorder" ng-show="films.predicate === '-vote_average'" ng-class="{reverse:reverse}"></span>
        </th>
        <th>
          <a href="" ng-click="films.order('-release_date')">Release date</a>
          <span class="sortorder" ng-show="films.predicate === '-release_date'" ng-class="{reverse:reverse}"></span>
        </th>
      </tr>
    </table>

    <div class="row col-md-4  pull-left list-inline" ng-if="movie.poster_path && movie.release_date && movie.overview" ng-repeat="movie in films.allMovies | orderBy:films.predicate:false">
      <div class="card">
        <img class="card-img-top" ng-src="https://image.tmdb.org/t/p/w300{{movie.poster_path}}" alt="Card image cap">
        <div class="card-block">
          <a href="" ><h5 ng-click="films.showMovie(movie)" ng-if="movie.title" class="card-title">{{ movie.title}}</h5></a>
          <h5 ng-if="movie.name" class="card-title">{{ movie.name}}</h5>
          <h6 class="card-text"><em>{{ movie.media_type}}</em></h6>
          <p class="card-text overview" >{{ movie.overview | limitTo: films.letterLimit}}</p>
          <p class="card-text">Popularity: {{ movie.popularity}}</p>
          <p class="card-text">Rating: {{ movie.vote_average}}</p>
          <p class="card-text">Release Date: {{ movie.release_date}}</p>
          <a href="#" class="btn btn-primary">Button</a>
        </div>
      </div>
    </div>
  </section>
</section>
